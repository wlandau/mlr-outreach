%%%-*- mode: latex; TeX-master: "race-test"-*-%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Author: Manuel López-Ibáñez <manuel.lopez-ibanez@ulb.ac.be>
%
% License: Copyright  Manuel López-Ibáñez
%          CC-BY-3.0 http://creativecommons.org/licenses/by/3.0/
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% FIXME: 
%%
%% * Make it more compact. Draw the points once, and then use
%% \tikstyle to hide/show/color them.
%% * Fix overfull \hbox (it is caused by \raceConfigurations).
%% * Make it more configurable:
%%    - Calculate \ystart \yend w.r.t. \rows (how to do computations in tikz?)
%%    - Define variable for circle size.
%%    - Define variable for transitions.
%%    - Define commands for labels.

%\draw[style=help lines] (0,0) grid (1,45);

\def\rows{35}
\def\ystart{34.5}
\def\yend{32.5}

\onslide*<.(17)->{
  \tikzstyle{unselected} = [selected]
}
\onslide*<.(18)>{
  \draw[fill=red,draw,red] (0,\rows) rectangle (15,21);
}

\onslide*<+>{
  \foreach \y in {0} {
    \foreach \x in {0,...,14}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+>{
\tikzstyle{arrow2} = [line width=1.5pt,red];
}
\onslide*<+>{
\tikzstyle{arrow1} = [line width=1.5pt,red];
}

\draw[arrow1,->]  (0,\rows) -- (0,0) node[very near end,above,rotate=90]{Instances};
\draw[arrow2,->]  (0,\rows) -- (16,\rows) node[midway,above]{\raceConfigurations};



\foreach \y in {0,...,2} {
  \foreach \x in {0,...,14}
  \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  \pause
}

\onslide*<+>{
  \foreach \y in {0,...,2} {
    \foreach \x in {0,...,10}
    \filldraw[selected] (0.5 + \x  , \ystart - \y) circle (0.35);
    \foreach \x in {11,...,14}
    \filldraw[discarded] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {0,...,2} {
    \foreach \x in {0,...,14}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }

  \foreach \y in {3} {
    \foreach \x in {0,...,10}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {4} {
    \foreach \x in {0,...,10}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+>{
  \foreach \y in {0,...,4} {
     \foreach \x in {0,...,6}
     \filldraw[selected] (0.5 + \x, \ystart - \y) circle (0.35);
     \foreach \x in {7,...,10}
     \filldraw[discarded] (0.5 + \x, \ystart - \y) circle (0.35);
   }
}

\onslide*<+->{
  \foreach \y in {5} {
    \foreach \x in {0,...,6}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {6,...,10} {
    \foreach \x in {0,...,6}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+>{
  \foreach \y in {0,...,10} {
    \foreach \x in {0,...,4}
    \filldraw[selected] (0.5 + \x  , \ystart - \y) circle (0.35);
    \foreach \x in {5,...,6}
    \filldraw[discarded] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {11,...,20} {
    \foreach \x in {0,...,4}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {21,...,30} {
    \foreach \x in {0,...,4}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}

\onslide*<+->{
  \foreach \y in {31,...,\yend} {
    \foreach \x in {0,...,1}
    \filldraw[unselected] (0.5 + \x  , \ystart - \y) circle (0.35);
  }
}




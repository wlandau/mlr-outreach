\usecolortheme{dove}
\usefonttheme{serif}

%% Uncomment to use custom theme:

\usetheme{metropolis}
\setbeamertemplate{frametitle}{
  \nointerlineskip%
  \begin{beamercolorbox}[wd=\paperwidth, sep=1.5ex,]{frametitle}
    \MakeUppercase\insertframetitle
  \end{beamercolorbox}%
}

\usepackage{caption}
\captionsetup[figure]{labelformat=empty}

\usepackage{xfrac}
\setbeamertemplate{footline}{
	\raisebox{3pt}{\makebox[\paperwidth]{\hfill\makebox[25pt]{\color{gray}
				$\sfrac{\insertframenumber}{\inserttotalframenumber}$}}}\hspace*{3pt}}

\usepackage{xcolor}
\usepackage{mdframed}

\definecolor{darkblue}{RGB}{34,55,58}

% Define Shaded if not defined already through knitr:
\makeatletter
\@ifundefined{Shaded}{%
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}%
}{}
\makeatother

\renewenvironment{Shaded}{
  \begin{mdframed}[backgroundcolor=black!8,
                   linecolor=darkblue,
                   rightline=false,
				   leftline=false]}{
  \end{mdframed}}

\usepackage{transparent}
% 
% \titlegraphic{
%   \vspace{2cm}
%   \hspace{5.03cm}
%   \transparent{0.2}
%   \includegraphics[width=8cm]{./../../_setup/images/logos/LMU}
% }

\usepackage[english]{babel}
\usepackage{dsfont}
\usepackage{verbatim}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{csquotes}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{enumerate}
% \usepackage[absolute,overlay]{textpos}
\usepackage{psfrag}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{eqnarray}
\usepackage{arydshln}
\usepackage{tabularx}
\usepackage{placeins}
\usepackage{tikz}
\usepackage{setspace}
\usetikzlibrary{shapes,arrows,automata,positioning,calc}
\usepackage{subfig}
% \usepackage{paralist}
\usepackage{graphicx}
\usepackage{array}
\usepackage{framed}
\usepackage{excludeonly}
\usepackage{fancyvrb}


% math spaces
\newcommand{\N}{\mathds{N}} % naturals
\newcommand{\Z}{\mathds{Z}} % integers
\newcommand{\Q}{\mathds{Q}} % rationals
\newcommand{\R}{\mathds{R}} % reals
% \newcommand{\C}{\mathds{C}} % complex
\newcommand{\HS}{\mathcal{H}}  % hilbertspace

% basic math stuff
\newcommand{\abs}[1]{\ensuremath{\left| #1 \right|}}
\newcommand{\argmax}{\operatornamewithlimits{arg\,max}}
\newcommand{\argmin}{\operatornamewithlimits{arg\,min}}
\newcommand{\sign}{\operatorname{sign}}                                     % sign, signum
\newcommand{\I}{\mathbb{I}}                                                 % I, indicator
\newcommand{\order}{\mathcal{O}}                                            % O, order
\newcommand{\fp}[2]{\frac{\partial #1}{\partial #2}}                        % partial derivative
\newcommand{\continuous}{\mathcal{C}}                                       % C, space of continuous functions
\newcommand{\distas}[1]{\overset{#1}{\sim}}                                 % ????????????
\newcommand{\pd}[2]{\frac{\partial{#1}}{\partial #2}}
\newcommand{\sumin}{\sum_{i=1}^n}
\newcommand{\sumkg}{\sum_{k=1}^g}
\newcommand{\prodin}{\prod_{i=1}^n}
\newcommand{\prodkg}{\prod_{k=1}^g}
\newcommand{\xt}{\tilde x}													% x tilde

% linear algebra
\newcommand{\one}{\boldsymbol{1}} % unitvector
\newcommand{\id}{\mathrm{I}}      %identity
\newcommand{\diag}{\operatorname{diag}} %diagonal
\newcommand{\trace}{\operatorname{tr}} % trace
\newcommand{\spn}{\operatorname{span}} % span
\newcommand{\scp}[2]{\left\langle #1, #2 \right\rangle}

% scalarproduct

% basic probability + stats
\renewcommand{\P}{\mathds{P}} % probability
\newcommand{\E}{\mathds{E}} % expectation
\newcommand{\var}{\mathsf{Var}} % variance
\newcommand{\cov}{\mathsf{Cov}} % covariance
\newcommand{\corr}{\mathsf{Corr}} % correlation
\newcommand{\normal}{\mathcal{N}} % N of the normal distribution
\newcommand{\iid}{\overset{i.i.d}{\sim}}                                    % dist with i.i.d superscript

%%%%%% ml - data
\newcommand{\Xspace}{\mathcal{X}}                                           % X, input space
\newcommand{\Yspace}{\mathcal{Y}}                                           % Y, output space
\newcommand{\nset}{\{1, \ldots, n\}}                                        % set from 1 to n
\newcommand{\pset}{\{1, \ldots, p\}}                                        % set from 1 to p
\newcommand{\gset}{\{1, \ldots, g\}}                                        % set from 1 to g
\newcommand{\Pxy}{\P_{xy}}                                                  % P_xy
% observation (x, y)
\newcommand{\xvec}{\left(x_1, \ldots, x_p\right)^T}                                    % (x1, ..., xp)
\newcommand{\xivec}{(x^{(i)}_1, \ldots, x^{(i)}_p)^T}                       % (x1^i, ..., xp^i)
\renewcommand{\xi}[1][i]{x^{(#1)}}                                          % x^i
\newcommand{\yi}[1][i]{y^{(#1)}}                                            % y^i
\newcommand{\xyi}{\left(\xi, \yi\right)}                                               % (x^i, y^i)
\newcommand{\xy}{\left(x, y\right)}                                                    % (x, y)
% data
\newcommand{\D}{\mathcal{D}}                                                % D, data
\newcommand{\Dset}{\{ (x^{(1)}, y^{(1)}), \ldots, (x^{(n)},  y^{(n)})\}}    % {(x1,y1)), ..., (xn,yn)} data
\newcommand{\xdat}{\{ x^{(1)}, \ldots, x^{(n)}\}}   						 % {x1, ..., xn} data
\newcommand{\Dtrain}{\mathcal{D}_{\text{train}}}                            % D_train, training set
\newcommand{\Dtest}{\mathcal{D}_{\text{test}}}                              % D_test, test set
\newcommand{\xj}{x_j}                                                       % x_j
\newcommand{\xjb}{\mathbf{x}_j}                                             % x_j (bold)
\newcommand{\xjvec}{(x^{(1)}_j, \ldots, x^{(n)}_j)^T}                       % (x^1_j, ..., x^p_j)
\newcommand{\ydat}{\mathbf{y}}                                              % y (bold)
\newcommand{\yvec}{(y^{(1)}, \hdots, y^{(n)})^T}                            % (y1, ..., yn)


%%%%%% ml - model
% prediction function f, theta, yhat
\newcommand{\Hspace}{H}
\newcommand{\fx}{f\left(x\right)}                                                      % f(x)
\newcommand{\fxh}{\fh\left(x\right)}                                                   % fhat(x)
\newcommand{\fxt}{f\left(x \mid \theta \right)}                             % f(x | theta)
\newcommand{\fxi}{f\left(\xi\right)}                                        % f(x^(i))
\newcommand{\fxih}{\hat{f}\left(\xi\right)}                                 % f(x^(i))
\newcommand{\fxit}{f\left(x^{(i)} \mid \theta \right)}                      % f(x^(i) | theta)
\newcommand{\fh}{\hat{f}}                                                   % f hat
\newcommand{\thetah}{\hat{\theta}}                                          % theta hat
\newcommand{\fhD}{\fh_{\D}}                                                 %
\newcommand{\fhDtrain}{\fh_{\Dtrain}}                                       %

\newcommand{\yh}{\hat{y}}                                                   % y hat for prediction of target
\newcommand{\yih}{\hat{y}^{(i)}}                                            % y hat for prediction of target
% prediction function h
\newcommand{\hx}{h\left(x\right)}                                                      % h(x)
\newcommand{\hxt}{h\left(x \mid \theta\right)}                              % h(x | theta)
\newcommand{\hxi}{h\left(\xi\right)}                                                   % h(x^(i))
\newcommand{\hxit}{h\left(x^{(i)} \mid \theta\right)}                       % h(x^(i) | theta)
\newcommand{\hh}{\hat{h}}                                                   % h hat
\newcommand{\hxh}{\hat{h}\left(x\right)}                                               % hhat(x)
% risk
% pdf of x and (x,y)
\newcommand{\post}{\P\left(y = 1 \mid x\right)}                             % P(y = 1 | x), post. prob for y=1
\newcommand{\postk}{\P\left(y = k \mid x\right)}                            % P(y = k | y), post. prob for y=k
\newcommand{\pik}{\pi_k}                                                    % pi_k, prior
\newcommand{\pix}{\pi\left(x\right)}                                        % pi(x), P(y = 1 \mid x)
\newcommand{\pixt}{\pi\left(x \mid \theta\right)}                           %
\newcommand{\pikx}{\pi_k\left(x\right)}                                                % pi_k(x), P(y = k | x)
\newcommand{\pikxt}{\pi_k\left(x \mid \theta\right)}                        %
\newcommand{\pijx}{\pi_j\left(x\right)}                                                % pi_j(x), P(y = j | x)
\newcommand{\pixh}{\hat \pi\left(x\right)}                                             % pi(x) hat, P(y = 1 | x) hat
\newcommand{\pikxh}{\hat \pi_k\left(x\right)}                                          % pi_k(x) hat, P(y = k | x) hat
\newcommand{\pdf}{p}                                                        % p
\newcommand{\pdfx}{p\left(x\right)}                                                    % p(x)
\newcommand{\pdfxy}{p\left(x,y\right)}                                                 % p(x, y)
\newcommand{\pdfxyt}{p\left(x, y \mid \theta\right)}                        % p(x, y | theta)
\newcommand{\pdfxyit}{p\left(\xi, \yi \mid \theta\right)}                   % p(x^(i), y^(i) | theta)
\newcommand{\pdfxyk}{p\left(x \mid y=k\right)}                              % p(x | y = k)
\newcommand{\pdfxiyk}{p\left(\xi \mid y=k\right)}                           % p(x^i | y = k)
\newcommand{\lpdfxyk}{\log \pdfxyk}                                         %
\newcommand{\lpik}{\log \pik}                                               %
\newcommand{\pdfygxt}{p\left(y \mid x, \theta\right)}                       % p(y | x, theta)
\newcommand{\pdfyigxit}{p\left(\yi \mid \xi, \theta\right)}                 % p(y^i |x^i, theta)
\newcommand{\lpdfygxt}{\log \pdfygxt }                                      %
\newcommand{\lpdfyigxit}{\log \pdfyigxit}                                   %

% residual and margin
\newcommand{\eps}{\epsilon}                                                 % residual, stochastic
\newcommand{\epsi}{\epsilon^{(i)}}                                          % r^i, residual, stochastic
\newcommand{\epsh}{\hat{\epsilon}}                                          % residual, estimated
\newcommand{\yf}{y \fx}                                                     % y f(x), margin
\newcommand{\yfi}{\yi \fxi}                                                 % y^i f(x^i), margin
\newcommand{\Sigmah}{\hat \Sigma}											                      % estimated covariance matrix
\newcommand{\Sigmahj}{\hat \Sigma_j}										                    % estimated covariance matrix for the j-th class


% ml - loss, risk, likelihood
\newcommand{\Lxy}{L\left(y, f\left(x\right)\right)}                                               % L(y, f(x))
\newcommand{\Lxyi}{L\left(\yi, \fxi\right)}                                            % L(y^i, f(x^i))
\newcommand{\Lxyt}{L\left(y, \fxt\right)}                                              % L(y, f(x | theta))
\newcommand{\Lxyit}{L\left(\yi, \fxit\right)}                                          % L(y^i, f(x^i | theta)
\newcommand{\risk}{\mathcal{R}}                                             % R
\newcommand{\riskf}{\risk\left(f\right)}                                               % R(f)
\newcommand{\riske}{\mathcal{R}_{\text{emp}}}                               % R_emp
\newcommand{\riskef}{\riske\left(f\right)}                                             % R_emp(f)
\newcommand{\risket}{\mathcal{R}_{\text{emp}}(\theta)}                      % R_emp(theta)
\newcommand{\riskr}{\mathcal{R}_{\text{reg}}}                               % R_reg
\newcommand{\riskrt}{\mathcal{R}_{\text{reg}}(\theta)}                      % R_reg(theta)
\newcommand{\riskrf}{\riskr\left(f\right)}                                             % R_reg(f)
\newcommand{\LL}{\mathcal{L}}                                               % L, likelihood
\newcommand{\LLt}{\mathcal{L}\left(\theta\right)}                                      % L(theta), likelihood
\renewcommand{\ll}{\ell}                                                    % l, log-likelihood
\newcommand{\llt}{\ell\left(\theta\right)}                                             % l(theta), log-likelihood
\newcommand{\LS}{\mathfrak{L}}                                              % ????????????
\newcommand{\TS}{\mathfrak{T}}                                              % ??????????????
\newcommand{\errtrain}{\text{err}_{\text{train}}}                           % training error
\newcommand{\errtest}{\text{err}_{\text{test}}}                             % training error
\newcommand{\errexp}{\overline{\text{err}_{\text{test}}}}                   % training error


%ml - trees, extra trees
\newcommand{\Np}{\mathcal{N}}												                        % Parent node N
\newcommand{\Nl}{\Np_1}														                          % Left node N_1
\newcommand{\Nr}{\Np_2}														                          % Right node N_2
\newcommand{\pikN}{\hat{\pi}^\Np}


% ml - boosting
\newcommand{\fm}{f^{[m]}}                                                   % prediction in iteration m
\newcommand{\fmh}{\hat{f}^{[m]}}                                                   % prediction in iteration m
\newcommand{\fmd}{f^{[m-1]}}                                                % prediction m-1
\newcommand{\fmdh}{\hat{f}^{[m-1]}}                                                % prediction m-1
\newcommand{\bmm}{b^{[m]}}                                                  % basemodel m
\newcommand{\bmmh}{\hat{b}^{[m]}}                                           % basemodel m with hat
\newcommand{\betam}{\beta^{[m]}}                                            % weight of basemodel m
\newcommand{\betamh}{\hat{\beta}^{[m]}}                                     % weight of basemodel m with hat
\newcommand{\betai}[1]{\beta^{[#1]}}                                        % weight of basemodel with argument for m
\newcommand{\errm}{\text{err}^{[m]}}                                        % weighted in-sample misclassification rate
\newcommand{\wm}{w^{[m]}}                                                   % weight vector of basemodel m
\newcommand{\wmi}{w^{[m](i)}}                                               % weight of obs i of basemodel m
\newcommand{\thetam}{\theta^{[m]}}                                          % parameters of basemodel m
\newcommand{\thetamh}{\hat{\theta}^{[m]}}                                   % parameters of basemodel m with hat
\newcommand{\rmm}{r^{[m]}}                                                  % pseudo residuals
\newcommand{\rmi}{r^{[m](i)}}                                               % pseudo residuals
\newcommand{\Rtm}{R_{t}^{[m]}}                                              % terminal-region
\newcommand{\Tm}{T^{[m]}}                                                   %
\newcommand{\ctm}{c_t^{[m]}}                                                % mean, terminal-regions
\newcommand{\ctmh}{\hat{c}_t^{[m]}}                                         % mean, terminal-regions with hat
\newcommand{\ctmt}{\tilde{c}_t^{[m]}}                                       % mean, terminal-regions
\newcommand{\fxk}{f_k(x)}                                                   % f_k(x)
\newcommand{\Lp}{L^\prime}
\newcommand{\Ldp}{L^{\prime\prime}}
\newcommand{\Lpleft}{\Lp_{\text{left}}}


% basic latex stuff
\newcommand{\pkg}[1]{{\fontseries{b}\selectfont #1}} %fontstyle for R packages
\newcommand{\lz}{\vspace{0.5cm}} %vertical space
\newcommand{\mat}[1]{ %short pmatrix command
  \begin{pmatrix}
    #1
  \end{pmatrix}
}
\newcommand{\oneliner}[1] % Oneliner for important statements
{\begin{block}{}\begin{center}\begin{Large}#1\end{Large}\end{center}\end{block}}

\let\code=\texttt
\let\proglang=\textsf

\setkeys{Gin}{width=0.9\textwidth}

% Command for an automatic exercise counter for the exercise sheets:
\newcounter{Exercise}
\newcommand{\exercise}{
  \stepcounter{Exercise}
  \ifnum \theExercise = 1
    \Large{\textbf{Exercise \theExercise}} \\
  \else
    \vspace{\baselineskip} \Large{\textbf{Exercise \theExercise}} \\
  \fi
}

% Command for an automatic exercise counter for the courses:
\newcounter{CourseExercise}
\newcommand{\oneExercise}{
  \stepcounter{CourseExercise}
    \begin{center}
      \huge{Exercise \Roman{CourseExercise}}
    \end{center}
}
\newcommand{\twoExercises}{
  \stepcounter{CourseExercise}
    \begin{center}
      \huge{Exercise \Roman{CourseExercise} \& \stepcounter{CourseExercise} \Roman{CourseExercise}}
    \end{center}
}
\newcommand{\threeExercises}{
  \stepcounter{CourseExercise}
    \begin{center}
      \huge{Exercise \Roman{CourseExercise}, \stepcounter{CourseExercise} \Roman{CourseExercise} \& \stepcounter{CourseExercise} \Roman{CourseExercise}}
    \end{center}
}

\newcommand{\resetExercises}{\setcounter{CourseExercise}{0}}

\usetikzlibrary{shapes,arrows,automata,positioning,calc,chains,trees, shadows}
\tikzset{
  %Define standard arrow tip
  >=stealth',
  %Define style for boxes
  punkt/.style={
    rectangle,
    rounded corners,
    draw=black, very thick,
    text width=6.5em,
    minimum height=2em,
    text centered},
  % Define arrow style
  pil/.style={
    ->,
    thick,
    shorten <=2pt,
    shorten >=2pt,}
}
\usepackage{subfig}